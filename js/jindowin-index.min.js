var userSubSetting={startTime:"540",endTime:"540",timeinval:"1"};var jindowin={tempid:0,docHeight:document.documentElement.clientHeight,docWidth:document.documentElement.clientWidth,initSelectTimes:function(){var a=selectTime.times();var c=[];for(var b=0;b<a.length;b++){if(b===9){c.push("<option value='"+b+"' selected='selected'>"+a[b]+"</option>")}else{c.push("<option value='"+b+"'>"+a[b]+"</option>")}}$("#startTime").html(c.join(""));$("#endTime").html(c.join(""));$("#endTime").dropdown({autoinit:".select"});$("#startTime").dropdown({autoinit:".select"});$("#receiveTimes").dropdown()},receiveTimeChange:function(a){if($(a).is(":checked")){$("#receiveBox").removeClass("hide")}else{$("#receiveBox").addClass("hide")}},summaryChange:function(a){if($(a).is(":checked")){$("#summaryBox").removeClass("hide");if($("#receiveTimes").val()==="0"){$("#userDefineBox").removeClass("hide")}}else{$("#summaryBox").addClass("hide");$("#userDefineBox").addClass("hide")}},receiveTimesSelectChange:function(){if($("#receiveTimes").val()==="0"){$("#userDefineBox").removeClass("hide");$("#userDefineTimes").focus()}else{$("#userDefineBox").addClass("hide")}},settings:function(){var a=$("#startTime").val();var b=$("#endTime").val();if(a>b){$("#settingBoxTips").removeClass("hide").find("p").html("开始时间不能大于结束时间").slideDown();return}$("#complete-dialog").modal("hide")},getMyNewsCount:function(){var a=$("#myNewsHead").find("tr");if(a.length==0){$("#myNewsCount").html("我的快讯");$(".bs-docs-section.mynews").hide()}if(a.length>0){$(".bs-docs-section.mynews").show()}if(a.length<=5){$(".show-all-news").addClass("hide")}if(a.length>5){$("#myNewsCount").html("我的快讯("+a.length+")");$("#myNewsHead").find("tr:gt(4)").addClass("hide");$(".show-all-news").removeClass("hide")}},toggleIndexInfo:function(a){if(a){$(".mynews").removeClass("hide");$(".recommendnews").removeClass("hide");$(".settingnews").addClass("hide");$(".newsinfo").addClass("hide")}else{$(".mynews").addClass("hide");$(".recommendnews").addClass("hide");$(".settingnews").removeClass("hide");$(".newsinfo").removeClass("hide")}},showorhide:function(a){if($(a).attr("data-show-all")==="false"){$(a).find("div:first-child").html("点击隐藏更多");$(a).find("i").removeClass("fa-angle-down").addClass("fa-angle-up");$(a).attr("data-show-all","true");if(a.attr("id")==="showMyAll"){$("#myNewsHead>tbody>tr:gt(4)").removeClass("hide")}if(a.attr("id")==="rec-gp-all"){$("#gp-container div:hidden").removeClass("hide")}if(a.attr("id")==="rec-hy-all"){$("#hy-container div:hidden").removeClass("hide")}if(a.attr("id")==="rec-gn-all"){$("#gn-container div:hidden").removeClass("hide")}return}if($(a).attr("data-show-all")==="true"){$(a).find("div:first-child").html("点击展开更多");$(a).find("i").removeClass("fa-angle-up").addClass("fa-angle-down");$(a).attr("data-show-all","false");if(a.attr("id")==="showMyAll"){$("#myNewsHead>tbody>tr:gt(4)").addClass("hide")}if(a.attr("id")==="rec-gp-all"){$("#gp-container div:gt(2)").addClass("hide")}if(a.attr("id")==="rec-hy-all"){$("#hy-container div:gt(2)").addClass("hide")}if(a.attr("id")==="rec-gn-all"){$("#gn-container div:gt(2)").addClass("hide")}return}},searchResultShow:function(a,b){jindowin.toggleIndexInfo(false);switch(b){case"股票":this.buildStockInfo(a);break;case"行业":this.buildIndustryInfo(a);break;case"概念":this.buildConceptInfo(a);break;case"热点事件":this.buildHoteventInfo(a);break;default:$("#showInfos").html("");break}},buildStockInfo:function(b){var a=[];var c=b.substring(b.indexOf("(")+1,b.indexOf(")"));a.push('<div class="gp-infos">');a.push('<div class="gp-hotstock">');a.push('<h3 style="font-weight: 600;">'+b+"</h3>");a.push('<div style="position: absolute; padding-left: 232px; margin-top: -40px;"><i class="icon iconfont">&#xf013b;</i></div>');a.push('<div class="right-btn"><label>24.2万人订阅</label>');a.push('<a class="btn btn-raised btn-info btn-sm info-subscription" href="javascript:void(0)" style="background-color: #0068b7;">订阅</a>');a.push('<a class="btn btn-raised btn-info btn-sm info-share" href="javascript:void(0)" style="background-color: #0068b7;">分享</a>');a.push("</div>");a.push("<hr>");a.push('                                <h3 style="padding-bottom: 10px;">资讯预览</h3>');a.push('                                <div class="container">');a.push('                                  <table class="table">');a.push("                                      <tr>");a.push('                                          <td>查看热度:<span class="text-danger">0.5% ↑</span></td>');a.push('                                          <td>搜索热度:<span class="text-danger">0.5% ↑</span></td>');a.push('                                          <td>关注热度:<span class="text-danger">0.5% ↑</span></td>');a.push("                                      </tr>");a.push("                                      <tr>");a.push('                                          <td>查看增量:<span class="text-danger">0.5% ↑</span></td>');a.push('                                          <td>搜索增量:<span class="text-danger">0.5% ↑</span></td>');a.push('                                          <td>关注增量:<span class="text-danger">0.5% ↑</span></td>');a.push("                                      </tr>");a.push("                                  </table>");a.push("                                </div>");a.push("</div>");a.push('<div class="gp-xw"></div>');a.push("</div>");$("#showInfos").html(a.join(""));jindowin.getIndexStockDetail(c,0,function(){jindowin.showLoading($(".gp-xw"))},function(d){if(d.status===1){var f=[];if(d.result.length>0){for(var e=0;e<d.result.length;e++){f.push('                                <div class="row">');f.push('                                    <div class="col-md-12">');f.push("                                        <h4>新闻</h4>");f.push('                                        <hr style="margin-top:0; ">');f.push("                                    </div>");f.push('                                    <div class="col-md-12">');f.push('                                        <div class="col-md-9">');f.push('                                            <div class="list-news-top">');f.push("                                                <h4>"+d.result[e].title+"</h4>");f.push("                                            </div>");f.push('                                            <div class="list-news-content">');f.push("                                                <p></p>");f.push("                                            </div>");f.push('                                            <div class="list-news-bottom">');f.push('                                                <div class="col-sm-6 text-left">');f.push("                                                    <label>来源："+d.result[e].from+"&nbsp;&nbsp;&nbsp;&nbsp; "+d.result[e].time+"</label>");f.push("                                                </div>");f.push('                                                <div class="col-sm-6 text-right">');f.push("                                                    <label>");f.push('                                                        <i class="icon iconfont">&#xe61e;</i>'+d.result[e].up+"");f.push('                                                        <i class="icon iconfont">&#xe61d;</i>'+d.result[e].down+"");f.push('                                                        <i class="icon iconfont">&#xe610;</i>');f.push("                                                    </label>");f.push("                                                </div>");f.push("                                            </div>");f.push("                                        </div>");f.push('                                        <div class="col-md-3 list-news-pic">');f.push('                                            <img src="imgs/qrcode.png">');f.push("                                        </div>");f.push("                                    </div>");f.push("                                </div>")}}else{f.push("")}$(".gp-xw").html(f.join(""))}})},buildIndustryInfo:function(a){var b=[];b.push('<div class="hy-infos">');b.push('<div class="hy-hotstock">');b.push('<h3 style="font-weight: 600;">金融业</h3>');b.push('<div style="position: absolute; padding-left: 92px; margin-top: -40px;">');b.push('<i class="icon iconfont">&#xf013b;</i>');b.push("</div>");b.push('<div class="right-btn">');b.push("<label>24.2万人订阅</label>");b.push('<a class="btn btn-raised btn-info btn-sm info-subscription" href="javascript:void(0)" style="background-color: #0068b7;">订阅</a>');b.push('<a class="btn btn-raised btn-info btn-sm info-share" href="javascript:void(0)" style="background-color: #0068b7;">分享</a>');b.push("</div>");b.push("<hr>");b.push('<h3 style="padding-bottom: 10px;">资讯预览</h3>');b.push("                                <h4>金融热门股票</h4>");b.push('                                <div class="container hot-stock">');b.push('                                    <div class="col-md-4">');b.push('                                        <div class="panel panel-default">');b.push('                                            <div class="panel-heading">浦发银行 SH001263</div>');b.push('                                            <div class="panel-body">');b.push('                                                <table class="table text-center">');b.push("                                                    <tr>");b.push("                                                        <td>查看：0.5%</td>");b.push("                                                        <td>查看增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>搜索：0.5%</td>");b.push("                                                        <td>搜索增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>关注：0.5%</td>");b.push("                                                        <td>关注增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                </table>");b.push("                                            </div>");b.push("                                        </div>");b.push("                                    </div>");b.push('                                    <div class="col-md-4">');b.push('                                        <div class="panel panel-default">');b.push('                                            <div class="panel-heading">平安银行 SH001263</div>');b.push('                                            <div class="panel-body">');b.push('                                                <table class="table text-center">');b.push("                                                    <tr>");b.push("                                                        <td>查看：0.5%</td>");b.push("                                                        <td>查看增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>搜索：0.5%</td>");b.push("                                                        <td>搜索增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>关注：0.5%</td>");b.push("                                                        <td>关注增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                </table>");b.push("                                            </div>");b.push("                                        </div>");b.push("                                    </div>");b.push('                                    <div class="col-md-4">');b.push('                                        <div class="panel panel-default">');b.push('                                            <div class="panel-heading">招商银行 SH001263</div>');b.push('                                            <div class="panel-body">');b.push('                                                <table class="table text-center">');b.push("                                                    <tr>");b.push("                                                        <td>查看：0.5%</td>");b.push("                                                        <td>查看增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>搜索：0.5%</td>");b.push("                                                        <td>搜索增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                    <tr>");b.push("                                                        <td>关注：0.5%</td>");b.push("                                                        <td>关注增量：0.5%</td>");b.push("                                                    </tr>");b.push("                                                </table>");b.push("                                            </div>");b.push("                                        </div>");b.push("                                    </div>");b.push("                                </div>");b.push("</div>");b.push('<div class="hy-xw"></div>');b.push("</div>");$("#showInfos").html(b.join(""));jindowin.getIndexIndustryDetail(a,0,function(){jindowin.showLoading($(".hy-xw"))},function(c){if(c.status===1){var e=[];if(c.result.length>0){for(var d=0;d<c.result.length;d++){e.push('                                <div class="row">');e.push('                                    <div class="col-md-12">');e.push("                                        <h4>新闻</h4>");e.push('                                        <hr style="margin-top:0; ">');e.push("                                    </div>");e.push('                                    <div class="col-md-12">');e.push('                                        <div class="col-md-9">');e.push('                                            <div class="list-news-top">');e.push("                                                <h4>"+c.result[d].title+"</h4>");e.push("                                            </div>");e.push('                                            <div class="list-news-content">');e.push("                                                <p></p>");e.push("                                            </div>");e.push('                                            <div class="list-news-bottom">');e.push('                                                <div class="col-md-6 text-left">');e.push("                                                    <label>来源："+c.result[d].from+"&nbsp;&nbsp;&nbsp;&nbsp; "+c.result[d].time+"</label>");e.push("                                                </div>");e.push('                                                <div class="col-md-6 text-right">');e.push("                                                    <label>");e.push('                                                        <i class="icon iconfont">&#xe61e;</i>'+c.result[d].up+"");e.push('                                                        <i class="icon iconfont">&#xe61d;</i>'+c.result[d].down+"");e.push('                                                        <i class="icon iconfont">&#xe610;</i>');e.push("                                                    </label>");e.push("                                                </div>");e.push("                                            </div>");e.push("                                        </div>");e.push('                                        <div class="col-md-3 list-news-pic">');e.push('                                            <img src="imgs/qrcode.png">');e.push("                                        </div>");e.push("                                    </div>");e.push("                                </div>")}}else{e.push("")}$(".hy-xw").html(e.join(""))}})},buildConceptInfo:function(){var a=[];a.push('<div class="gn-infos">当前概念板块下无内容</div>');$("#showInfos").html(a.join(""))},buildHoteventInfo:function(){var a=[];a.push('<div class="rd-infos">当前热点事件板块下无内容</div>');$("#showInfos").html(a.join(""))},getIndexStock:function(){$.ajax({url:"ajax/ajax_query_stock.php",dataType:"json",type:"post",beforeSend:function(){jindowin.showLoading($("#gp-container"))},success:function(b){if(b&&b.status===1){if(b.stock.length>0){var h=3;if(b!=null&&b.stock!=null){var a='<div class="container">';var d=b.stock.length/h;if(b.stock.length%h>0){d+=1}for(var e=0;e<d;e++){var g=(e*h);var f=e==0?h:((e+1)*h);if(g>b.stock.length){break}a+=' <div class="col-md-6 '+(e>=2?"hide":"")+'"><table class="table table-hover"><tbody>';for(var c=g;c<f;c++){if(!b.stock[c]){break}a+='<tr><td><img src="imgs/icon.png"></td><td>'+b.stock[c].stock_name+"("+b.stock[c].stock_code+')</td><td><i class="fa fa-plus" data-user-set="'+b.stock[c].stock_code+'"></i></td></tr>'}a+="</tbody></table></div>"}if(b.stock.length>6){$("#rec-gp-all").show()}$("#gp-container").html(a);jindowin.stockFollowInfo()}}}else{$("#gp-container").next().hide()}}})},getIndexStockDetail:function(a,b,c,d){$.ajax({url:"ajax/ajax_get_news.php",dataType:"json",type:"post",data:{stock_code:a,news_type:1,page:b},beforeSend:function(){c()},success:function(e){d&&d(e)}})},getIndexIndustry:function(){$.ajax({url:"ajax/ajax_query_industry.php",dataType:"json",type:"post",beforeSend:function(){jindowin.showLoading($("#hy-container"))},success:function(a){if(a&&a.status===1){if(a.industry.length>0){var h=3;if(a!=null&&a.industry!=null){var f='<div class="container">';var c=a.industry.length/h;if(a.industry.length%h>0){c+=1}for(var d=0;d<c;d++){var g=(d*h);var e=d==0?h:((d+1)*h);if(g>a.industry.length){break}f+=' <div class="col-md-6 '+(d>=2?"hide":"")+'"><table class="table table-hover"><tbody>';for(var b=g;b<e;b++){if(!a.industry[b]){break}f+='<tr><td><img src="imgs/icon.png"></td><td>'+a.industry[b].hy_name+'</td><td><i class="fa fa-plus" data-user-set="'+a.industry[b].hy_name+'"></i></td></tr>'}f+="</tbody></table></div>"}if(a.industry.length>6){$("#rec-hy-all").show()}$("#hy-container").html(f);jindowin.industryFollowInfo()}}}else{$("#hy-container").next().hide()}}})},getIndexIndustryDetail:function(a,b,c,d){$.ajax({url:"ajax/ajax_get_news.php",dataType:"json",type:"post",data:{hy_name:a,news_type:2,page:b},beforeSend:function(){c()},success:function(e){d&&d(e)}})},getIndexSection:function(){$.ajax({url:"ajax/ajax_query_section.php",dataType:"json",type:"post",beforeSend:function(){jindowin.showLoading($("#gn-container"))},success:function(a){if(a&&a.status===1){if(a.section.length>0){var h=3;if(a!=null&&a.section!=null){var e='<div class="container">';var c=a.section.length/h;if(a.section.length%h>0){c+=1}for(var d=0;d<c;d++){var g=(d*h);var f=d==0?h:((d+1)*h);if(g>a.section.length){break}e+=' <div class="col-md-6 '+(d>=2?"hide":"")+'"><table class="table table-hover"><tbody>';for(var b=g;b<f;b++){if(!a.section[b]){break}e+='<tr><td><img src="imgs/icon.png"></td><td>'+a.section[b].gn_name+'</td><td><i class="fa fa-plus" data-user-set="'+a.section[b].gn_name+'"></i></td></tr>'}e+="</tbody></table></div>"}if(a.section.length>6){$("#rec-gn-all").show()}$("#gn-container").html(e);jindowin.sectionFollowInfo()}}}else{$("#gn-container").next().hide()}}})},stockFollowInfo:function(){$("#gp-container table i").each(function(){var a=$(this);$(a).click(function(){jindowin.addSubscribe(userSubSetting.startTime,userSubSetting.endTime,userSubSetting.timeinval,$(a).attr("data-user-set"),null,null,function(){$(a).addClass("fa-spin")},function(b){$(a).removeClass("fa-spin");if(b.status===-1){$("#login-dialog").css("top",jindowin.docHeight/2-165+"px").modal();jindowin.tempid=$(a).attr("data-user-set").val();return}if(b.status===1){var c=[];c.push("<tr>");c.push("<td><a>"+$(a).parent().prev().html()+"</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='stock' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='stock' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("</td>");c.push("</tr>");if($("#myNewsHead tbody tr").length===0){$("#myNewsHead tbody").html(c.join(""))}else{$("#myNewsHead tbody tr:first-child").before(c.join(""))}jindowin.checkOrNot($(a));jindowin.getMyNewsCount();jindowin.bindSubscribeDel()}})})})},industryFollowInfo:function(){$("#hy-container table i").each(function(){var a=$(this);$(a).click(function(){jindowin.addSubscribe(userSubSetting.startTime,userSubSetting.endTime,userSubSetting.timeinval,null,$(a).attr("data-user-set"),null,function(){$(a).addClass("fa-spin")},function(b){$(a).removeClass("fa-spin");if(b.status===-1){$("#login-dialog").css("top",jindowin.docHeight/2-165+"px").modal();jindowin.tempid=$(a).attr("data-user-set").val();return}if(b.status===1){var c=[];c.push("<tr>");c.push("<td><a>"+$(a).attr("data-user-set")+"</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='industry' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='industry' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("</td>");c.push("</tr>");if($("#myNewsHead tbody tr").length===0){$("#myNewsHead tbody").html(c.join(""))}else{$("#myNewsHead tbody tr:first-child").before(c.join(""))}jindowin.checkOrNot($(a));jindowin.getMyNewsCount();jindowin.bindSubscribeDel()}})})})},sectionFollowInfo:function(){$("#gn-container table i").each(function(){var a=$(this);$(a).click(function(){jindowin.addSubscribe(userSubSetting.startTime,userSubSetting.endTime,userSubSetting.timeinval,null,null,$(a).attr("data-user-set"),function(){$(a).addClass("fa-spin")},function(b){$(a).removeClass("fa-spin");if(b.status===-1){$("#login-dialog").css("top",jindowin.docHeight/2-165+"px").modal();jindowin.tempid=$(a).attr("data-user-set").val();return}if(b.status===1){var c=[];c.push("<tr>");c.push("<td><a>"+$(a).attr("data-user-set")+"</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='section' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='section' data-set-val='"+$(a).attr("data-user-set")+"'></i>");c.push("</td>");c.push("</tr>");if($("#myNewsHead tbody tr").length===0){$("#myNewsHead tbody").html(c.join(""))}else{$("#myNewsHead tbody tr:first-child").before(c.join(""))}jindowin.checkOrNot($(a));jindowin.getMyNewsCount();jindowin.bindSubscribeDel()}})})})},userLogin:function(){var b=$("#login-email").val();var a=$("#login-pwd").val();var c=$("#cb-autologin").is(":checked");$.ajax({url:"ajax/ajax_user_login.php",dataType:"json",type:"post",cache:false,data:{user_name:b,password:a,autologin:c,user_type:1},beforeSend:function(){},success:function(d){if(d.status!==1){alert(d.result)}else{$("#login-dialog").modal("hide");$("#top-user-name").html(d.result.user_name);jindowin.getMyNewsCount()}}})},userRegister:function(){var c=$("#register-email").val();var b=$("#register-pwd-1").val();var a=$("#register-pwd-2").val();if(b!==a){alert("无UI弹框：两次密码不同");return}$.ajax({url:"ajax/ajax_user_register.php",dataType:"json",type:"post",data:{username:c,password1:b,password2:a},beforeSend:function(){},success:function(d){}})},showLoading:function(a){$(a).html('<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div><style>.spinner{width:30px;height:30px;position:relative;margin:100px auto}.double-bounce1,.double-bounce2{width:100%;height:100%;border-radius:50%;background-color:#005cb7;opacity:0.6;position:absolute;top:0;left:0;-webkit-animation:bounce 2.0s infinite ease-in-out;animation:bounce 2.0s infinite ease-in-out}.double-bounce2{-webkit-animation-delay:-1.0s;animation-delay:-1.0s}@-webkit-keyframes bounce{0%,100%{-webkit-transform:scale(0.0)}50%{-webkit-transform:scale(1.0)}}@keyframes bounce{0%,100%{transform:scale(0.0);-webkit-transform:scale(0.0)}50%{transform:scale(1.0);-webkit-transform:scale(1.0)}}</style>')},addSubscribe:function(a,d,i,b,e,f,g,h){var c={start_time:a,end_time:d,time_inval:i,stock_code:b,section:f,industry:e};$.ajax({url:"ajax/ajax_add_subscribe.php",dataType:"json",type:"post",data:c,beforeSend:function(){g()},success:function(j){h&&h(j)}})},delSubscribe:function(a,c,d,e){var b={stock_code:"",industry:"",section:""};switch(a){case"stock":b.stock_code=c;break;case"industry":b.industry=c;break;case"section":b.section=c;break}$.ajax({url:"ajax/ajax_delete_subscribe.php",dataType:"json",type:"post",data:b,beforeSend:function(){d()},success:function(f){e&&e(f)}})},querySubscribe:function(){$.ajax({url:"ajax/ajax_query_subscribe.php",dataType:"json",type:"post",async:false,beforeSend:function(){jindowin.showLoading($("#myNewsHead"))},success:function(a){console.info(a);var c=[];if(a.status===1){c.push("<tbody>");if(a.stock.length>0){for(var b=0;b<a.stock.length;b++){c.push("<tr>");c.push("<td><a>"+a.stock[b].stock_name+"("+a.stock[b].stock_code+")</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='stock' data-set-val='"+a.stock[b].stock_code+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='stock' data-set-val='"+a.stock[b].stock_code+"'></i>");c.push("</td>");c.push("</tr>")}}if(a.industry.length>0){for(var b=0;b<a.industry.length;b++){c.push("<tr>");c.push("<td><a>"+a.industry[b].industry_name+"</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='industry' data-set-val='"+a.industry[b].industry_name+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='industry' data-set-val='"+a.industry[b].industry_name+"'></i>");c.push("</td>");c.push("</tr>")}}if(a.section.length>0){for(var b=0;b<a.section.length;b++){c.push("<tr>");c.push("<td><a>"+a.section[b].section_name+"</a></td>");c.push('<td class="text-right">');c.push("<i class=\"fa fa-pencil\" data-set-type='section' data-set-val='"+a.section[b].section_name+"'></i>");c.push("<i class=\"fa fa-times\" data-set-type='section' data-set-val='"+a.section[b].section_name+"'></i>");c.push("</td>");c.push("</tr>")}}c.push("</tbody>")}else{c.push("")}$("#myNewsHead").html(c.join(""));jindowin.bindSubscribeDel()}})},checkOrNot:function(a){if($(a).hasClass("fa-check")){$(a).removeClass("fa-check").addClass("fa-plus").css("color","lightgray");$(a).parent().parent().css("background-color","#ffffff");return}else{$(a).removeClass("fa-plus").addClass("fa-check").css("color","gray");$(a).parent().parent().css("background-color","#f5f5f5");return}},bindSubscribeDel:function(){$("#myNewsHead tbody tr td:last-child i[class='fa fa-times']").on("click",function(){var b=$(this);var a=$(b).attr("data-set-type");var c=$(b).attr("data-set-val");jindowin.delSubscribe(a,c,function(){$(b).addClass("fa-spin")},function(d){$(b).removeClass("fa-spin");if(d.status===-1){$("#login-dialog").modal({backdrop:"static",keyboard:false});return}if(d.status===1){$(b).parent().parent().fadeOut("normal",function(){$("#myNewsHead tbody").find("tr").eq(5).removeClass("hide");$(this).remove();jindowin.getMyNewsCount()})}})})}};$.fn.extend({animateCss:function(b,c,d){var a="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(this).addClass("animated "+b).one(a,function(){$(this).removeClass("animated "+b);$("#"+c).remove();d()})}});$("#showMyAll").bind("click",function(){jindowin.showorhide($(this))});$("#rec-gp-all").bind("click",function(){jindowin.showorhide($(this))});$("#rec-hy-all").bind("click",function(){jindowin.showorhide($(this))});$("#rec-gn-all").bind("click",function(){jindowin.showorhide($(this))});$("#settingOk").bind("click",function(){jindowin.settings()});$("#receiveTimes").change(function(){jindowin.receiveTimesSelectChange()});$("#cbReceiveTime").change(function(){jindowin.receiveTimeChange($(this))});$("#cbSummary").change(function(){jindowin.summaryChange($(this))});$("#search-input").bind("input propertychange",function(){if($(this).val()===""){jindowin.toggleIndexInfo(true)}});$("#wechat").bind("click",function(){var a=jindowin.docHeight/2-110;$("#wechat-dialog").css("top",a+"px");$("#wechat-dialog").modal()});$(".show-my-setting").bind("click",function(){$("#complete-dialog").modal()});$(".info-subscription").bind("click",function(){if($(this).html()==="订阅"){$(this).html("已订阅")}else{$(this).html("订阅")}});$(".list-news-bottom>.col-sm-6.text-right>label>i").each(function(a){$(this).click(function(){switch(a){case 0:alert("1");break;case 1:alert("2");break;case 2:alert("3");break}})});$("#btn-login").bind("click",function(){jindowin.userLogin()});$("#btn-register").bind("click",function(){jindowin.userRegister()});$("#top-user-name").bind("click",function(){$("#login-dialog").css("top",jindowin.docHeight/2-165+"px").modal()});$("#search-input").typeahead({minLength:1,maxItem:20,order:"asc",hint:true,group:[true,"{{group}}"],maxItemPerGroup:5,backdrop:false,dynamic:true,emptyTemplate:'未找到 "{{query}}" 的相关信息',source:{"股票":{url:["ajax/ajax_search.php?message={{query}},","stock"]},"行业":{url:["ajax/ajax_search.php?message={{query}},","hy"]},"概念":{url:["ajax/ajax_search.php?message={{query}},","gn"]},"热点事件":{url:["ajax/ajax_search.php?message={{query}},","rd"]}},callback:{onClickAfter:function(d,b,c){if(c.display!==""){jindowin.searchResultShow(c.display,c.group)}},onSubmit:function(d,b,c){if(c.display!==""){jindowin.searchResultShow(c.display,c.group)}}},debug:true});$(function(){$("#testtest").popover({html:true,placement:"top",content:' <div class=\'allshare\'><i class="icon iconfont">&#xe686;</i><i class="icon iconfont">&#xe606;</i><i class="icon iconfont">&#xe65c;</i></div>',trigger:"focus"})});